<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <changeSet id="002-create-roles" author="system">
        <insert tableName="roles">
            <column name="name" value="ADMIN"/>
            <column name="description" value="Administrator role"/>
            <column name="permissions" value='["ALL"]'/>
        </insert>

        <insert tableName="roles">
            <column name="name" value="USER"/>
            <column name="description" value="User role"/>
            <column name="permissions" value='["MEMBER_CREATE"]'/>
        </insert>

        <insert tableName="roles">
            <column name="name" value="MEMBER"/>
            <column name="description" value="Member role"/>
            <column name="permissions" value='["MEMBER_VIEW", "MEMBER_RESET_PASSWORD"]'/>
        </insert>

        <!-- Rollback: Remove all roles on rollback -->
        <rollback>
            <delete tableName="roles">
                <where>name IN ('ADMIN', 'USER', 'MEMBER')</where>
            </delete>
        </rollback>
    </changeSet>

</databaseChangeLog>
